
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Findings, thoughts, tutorials, work. Pieces of my mind!">
      
      
      
        <link rel="canonical" href="https://pawamoy.github.io/posts/somewhat-modern-python-development/">
      
      
        <link rel="prev" href="../adding-links-to-formatted-and-syntax-highlighted-code/">
      
      
        <link rel="next" href="../testing-fastapi-ormar-alembic-apps/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.2+insiders-4.42.0">
    
    
      
        <title>Somewhat-modern Python - pawamoy's website</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.f2778614.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.46987102.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_markdown_exec_pyodide.css">
    
      <link rel="stylesheet" href="../../assets/_markdown_exec_ansi.css">
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/custom.css">
    
      <link rel="stylesheet" href="../../css/insiders.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="pawamoy&#39;s website" class="md-header__button md-logo" aria-label="pawamoy's website" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.41 3 3 4.41 5.69 7.1A7.924 7.924 0 0 0 4 12c0 1.85.63 3.55 1.69 4.9L3 19.59 4.41 21l2.69-2.69A7.924 7.924 0 0 0 12 20c1.85 0 3.55-.63 4.9-1.69L19.59 21 21 19.59l-2.69-2.69A7.924 7.924 0 0 0 20 12c0-1.85-.63-3.55-1.69-4.9L21 4.41 19.59 3 16.9 5.69A7.924 7.924 0 0 0 12 4c-1.85 0-3.55.63-4.9 1.69L4.41 3M12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            pawamoy's website
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Somewhat-modern Python
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="lime"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pawamoy/website/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pawamoy/website
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../about/" class="md-tabs__link">
        
  
    
  
  About

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../credits/" class="md-tabs__link">
        
  
    
  
  Credits

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../tingling-sensation-witnessing-existence/" class="md-tabs__link">
          
  
    
  
  Posts

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../showcase/" class="md-tabs__link">
          
  
    
  
  Showcase

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../insiders/" class="md-tabs__link">
        
  
    
  
  Insiders

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="pawamoy&#39;s website" class="md-nav__button md-logo" aria-label="pawamoy's website" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.41 3 3 4.41 5.69 7.1A7.924 7.924 0 0 0 4 12c0 1.85.63 3.55 1.69 4.9L3 19.59 4.41 21l2.69-2.69A7.924 7.924 0 0 0 12 20c1.85 0 3.55-.63 4.9-1.69L19.59 21 21 19.59l-2.69-2.69A7.924 7.924 0 0 0 20 12c0-1.85-.63-3.55-1.69-4.9L21 4.41 19.59 3 16.9 5.69A7.924 7.924 0 0 0 12 4c-1.85 0-3.55.63-4.9 1.69L4.41 3M12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6Z"/></svg>

    </a>
    pawamoy's website
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pawamoy/website/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pawamoy/website
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    About
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../credits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Credits
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    Posts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Posts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    2024
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    2024
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tingling-sensation-witnessing-existence/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    The tingling sensation of witnessing your own existence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../steam-linux-alvr-quest2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Playing Steam VR games running on Linux in the Oculus Quest 2 through ALVR (wireless)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    2023
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2023
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../the-insiders-journey/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    The Insiders journey
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../adding-links-to-formatted-and-syntax-highlighted-code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Adding links to a Black formatted, Pygments syntax highlighted Python code block
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    2022
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    2022
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    
  
    Somewhat-modern Python
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    
  
    Somewhat-modern Python
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Introduction
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-templating-copier" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Project templating: Copier
        </span>
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Project templating: Copier">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Creating a template
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-a-project" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Generating a project
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-generated-projects" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Updating generated projects
        </span>
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-management-pdm" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Project management: PDM
        </span>
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Project management: PDM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-and-using-pdm" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Installing and using PDM
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#declaring-your-project-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Declaring your project metadata
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#declaring-your-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Declaring your dependencies
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-and-publishing-wheels" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Building and publishing wheels
        </span>
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-runner-duty" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Task runner: duty
        </span>
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task runner: duty">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#project-setup-running-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Project setup, running tasks
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quality-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Quality analysis
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-formatters" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Code formatters
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Security analysis
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-suite" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Test suite
        </span>
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation-mkdocs" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Documentation: MkDocs
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#continuous-integration-github-actions" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Continuous Integration: GitHub Actions
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workflow-integrating-everything-together" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Workflow: integrating everything together
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Conclusion
        </span>
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../testing-fastapi-ormar-alembic-apps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Testing a FastAPI application using Ormar models and Alembic migrations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../add-alembic-migrations-to-existing-fastapi-ormar-project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    How to add Alembic migrations to an existing FastAPI + Ormar project
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    2020
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    2020
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../local-http-server-fake-files-testing-purposes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Local HTTP server sending fake files for testing purposes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../pass-makefile-args-as-typed-in-command-line/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Passing Makefile arguments to a command, as they are typed in the command line.
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../plugins-as-python-native-namespace-packages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Python packages and plugins as namespace packages
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../howto-edit-git-commit-contents/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    How to edit the contents of a git commit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../migrate-disqus-comments-to-utterances-github/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Migrate Disqus comments to Utterances (in GitHub issues) with Python
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-deal-with-jinja2-spacing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    How to deal with spacing in Jinja2 templates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../unify-logging-for-a-gunicorn-uvicorn-app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Unify Python logging for a Gunicorn/Uvicorn/FastAPI application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    2019
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    2019
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../save-pytest-logs-as-artifact-gitlab-ci/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Save the logs generated during a pytest run as a job artifact on GitLab/GitHub CI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../challenge-fill-space-one-line-90-degree-same-direction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Challenge: fill a 2D space with one continuous line doing 90Â° angle turns in the same direction (left/right)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    2018
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    2018
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../django-auth-server-for-shiny/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Django application as an authentication / authorization server for Shiny
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../dual-screens-setup-nvidia-bunsenlabs-debian-jessie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    How to install NVidia drivers on BunsenLabs/Debian 8 to setup dual screens
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../docker-compose-django-postgres-nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Docker Compose with NginX, Django, Gunicorn and multiple Postgres databases
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    2017
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    2017
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../python-static-code-analysis-tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Python static code analysis tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    2016
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    2016
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../write-and-use-a-tox-plugin-from-inside-your-package/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Write and use a tox plugin from inside your package
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../documentation-in-your-shell-scripts-using-shellman/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Documentation in your shell scripts using shellman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../django-dashboard-with-suit-and-highcharts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Django admin dashboard with Suit and Highcharts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    Showcase
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Showcase
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../showcase/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Showcase Grid
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    Projects
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Projects
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../showcase/aria2p/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    <span class="md-typeset">
      aria2p
    </span>
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../showcase/copier-pdm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    <span class="md-typeset">
      copier-pdm
    </span>
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../showcase/dependenpy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    <span class="md-typeset">
      dependenpy
    </span>
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../showcase/failprint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    <span class="md-typeset">
      failprint
    </span>
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../showcase/griffe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    <span class="md-typeset">
      griffe
    </span>
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../showcase/git-changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    <span class="md-typeset">
      git-changelog
    </span>
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../showcase/mkdocstrings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    <span class="md-typeset">
      mkdocstrings
    </span>
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../showcase/mvodb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    <span class="md-typeset">
      mvodb
    </span>
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../showcase/shell-history/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    <span class="md-typeset">
      shell-history
    </span>
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../showcase/shelldemo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    <span class="md-typeset">
      shelldemo
    </span>
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../showcase/shellman/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    <span class="md-typeset">
      shellman
    </span>
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../insiders/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Insiders
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Introduction
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-templating-copier" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Project templating: Copier
        </span>
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Project templating: Copier">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Creating a template
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-a-project" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Generating a project
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-generated-projects" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Updating generated projects
        </span>
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-management-pdm" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Project management: PDM
        </span>
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Project management: PDM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-and-using-pdm" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Installing and using PDM
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#declaring-your-project-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Declaring your project metadata
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#declaring-your-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Declaring your dependencies
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-and-publishing-wheels" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Building and publishing wheels
        </span>
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-runner-duty" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Task runner: duty
        </span>
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task runner: duty">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#project-setup-running-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Project setup, running tasks
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quality-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Quality analysis
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-formatters" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Code formatters
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Security analysis
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-suite" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Test suite
        </span>
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation-mkdocs" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Documentation: MkDocs
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#continuous-integration-github-actions" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Continuous Integration: GitHub Actions
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workflow-integrating-everything-together" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Workflow: integrating everything together
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Conclusion
        </span>
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
  <h1>Somewhat-modern Python</h1>
  <p class="post-meta">
    Published Sep 22, 2022
    by TimothÃ©e Mazzucotelli
  </p>
  
  <p>In this post I present my latest project template for Python projects,
<a href="https://github.com/pawamoy/copier-pdm">copier-pdm</a>,
based on the great <a href="https://github.com/copier-org/copier">Copier</a>.</p>
<p>This parodic title was inspired by the
<a href="https://cjolowicz.github.io/posts/hypermodern-python-01-setup/">"Hypermodern Python"</a>
article series by <a href="https://github.com/cjolowicz">Claudio Jolowicz</a>.
Indeed, my Python development setup has parts that could considered
modern by some, and old-school by others, so I found it funny
to call it "more-or-less modern".</p>
<!--more-->

<hr />
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">Â¤</a></h2>
<p>As Claudio points it out in his article series,
the Python landscape has changed considerably this
last decade, and even more so these last few years.
Python is now one of the most used languages in the world,
and we see a plethora of new projects coming up to life.
Code formatters, linters, test runners, task runners,
documentation generators, project managers, wheel builders
and installers, dependency resolvers, CLI/TUI/API frameworks,
static/runtime type checkers. It can be hard
for new-comers to choose their tools and libraries,
or even learn about their existence. Seasoned developers
might see a lot of these new projects as new "toys"
that will just be unmaintained one year from now.
Sometimes, they are right. But I think it's important
to keep an open-mind and try new fancy projects,
even if they're not widely accepted/used by
the community of Python developers (experts and beginners),
or even create your own tools and libraries. Sometimes, it pays.
Sometimes, you fill a niche and get progressive adoption.</p>
<p>That's what I've been doing for a few years now.
I'm far from being the most experienced Python developer,
but I've grown to know the ecosytem quite well.
I have my opinions, which not everybody will share.
And I know (almost) exactly what I need as a Python developer.
This is why I have created my own template for Python projects.
It is very opinionated, and makes use of some of my own tools
which are probably completely unknown to the community.</p>
<p>This post presents all the tools
and libraries used in my template, categorized and ordered
from general aspects of project templating and Python projects,
to very specific things like "what do I want to see in the
standard output of my task runner":</p>
<ul>
<li><a href="#project-templating-copier">Project templating</a>: creating a template, generating projects, updating generated projects.</li>
<li><a href="#project-management-pdm">Project management</a>: metadata, dependencies, building and publishing wheels.</li>
<li><a href="#task-runner-duty">Running tasks</a>: setting the project up, running quality checks or tests suites, etc.</li>
<li><a href="#documentation-mkdocs">Documentation</a>: writing docs/docstrings, automatic code reference, publishing.</li>
<li><a href="#continuous-integration-github-actions">Continuous Integration</a>: DRY configuration between local and CI</li>
<li><a href="#workflow-integrating-everything-together">Workflow</a>: Git commit messages, automatic changelog generation, new releases.</li>
</ul>
<h2 id="project-templating-copier">Project templating: Copier<a class="headerlink" href="#project-templating-copier" title="Permanent link">Â¤</a></h2>
<p><img alt="copier logo" src="../../assets/copier-logo.png" /></p>
<p>Copier is a project templating tool.
It is able to generate a project from a given template,
prompting the user for some information, and injecting
this information into the generated files.
A template is basically a git repository with
templated files and folders,
as well as a configuration file for Copier.
Files ending with a <code>.jinja</code> extension will be rendered
using <a href="https://palletsprojects.com/p/jinja/">Jinja</a>.
The Jinja context will be populated with the user's answers.</p>
<div class="highlight"><pre><span></span><code><span class="gp">% </span>copier<span class="w"> </span>gh:pawamoy/copier-pdm<span class="w"> </span>test-project
<span class="go">ð¤ Your project name</span>
<span class="go">   Test Project</span>
<span class="go">ð¤ Your project description</span>
<span class="go">   This is just a test.</span>
<span class="go">ð¤ Your full name</span>
<span class="go">   TimothÃ©e Mazzucotelli</span>
<span class="go">ð¤ Your email</span>
<span class="go">   dev@pawamoy.fr</span>
<span class="go">ð¤ Your username (e.g. on GitHub)</span>
<span class="go">   pawamoy</span>
<span class="go">...</span>
</code></pre></div>
<p>A template is very helpful when you create lots of new project:
you avoid writing boilerplate code again and again.</p>
<p>Now, Copier does not just allow to generate projects.
<strong>It is also able to <em>update</em> generated projects
when newer versions of templates are released.</strong></p>
<details class="info">
<summary>Story time: from Cookiecutter to Copier</summary>
<p>Most of Python developers probably know about <a href="https://github.com/cookiecutter/cookiecutter">CookieCutter</a>.
It's a project templating tool that allows to write language-and-technology-agnostic templates.
Templates are basically a folder, with files and other folders in it,
whose names and contents can be "templated", i.e. use variables, conditions and loops.
The templating language used is <a href="https://jinja2docs.readthedocs.io/en/stable/">Jinja2</a>,
another well known project.</p>
<p>Despite its popularity, CookieCutter lacks a crucial feature: upstream-to-downstream updates.
Let say you create your perfect Python project template with CookieCutter.
You use it to generate 5 or 6 projects with it. With time, these 5 or 6 projects will start
to diverge, and there's no integrated way into CookieCutter to prevent it.
You will apply clever things from project N back into the template itself,
but there's no way to apply these same modifications onto the other projects.
It effectively makes your template "single-use" or "one-time" only,
because once a project is generated, there's no way to keep it in sync with the template
evolutions themselves. And this is something users are trying to achieve,
see <a href="https://github.com/cookiecutter/cookiecutter/issues/784">cookiecutter#784</a> and
<a href="https://github.com/cookiecutter/cookiecutter/issues/1004">cookiecutter#1004</a>.</p>
<p>In fact, there is a way, and it's called <a href="https://github.com/cruft/cruft">Cruft</a>
(other alternatives exist but I feel like Cruft is the most popular).
But Cruft is a wrapper around CookieCutter so it can only do so much to improve it.
It does not have access to CookieCutter's internals, and therefore cannot provide
a completely integrated, native project-updating experience (at least in my opinion,
I will let you try it out if you are using CookieCutter, and let me know if I'm wrong <img alt="ð" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/1f604.svg" title=":smile:" />).</p>
<p>This is where <a href="https://github.com/copier-org/copier">Copier</a> shines:
that feature is built-in, by design. One of Copier's main goals
is to make it easy to update your already-generated projects
when your template evolves. It means that, even when you manage dozens of projects
that were generated using a single template, you can easily, almost automatically
keep them in sync, while still allowing small differences here and there.
I won't go into the details of how the update mechanism works (git operations, basically),
but you can see a <a href="https://copier.readthedocs.io/en/latest/updating/#how-the-update-works">diagram and explanation here</a>. </p>
<div class="admonition quote">
<p class="admonition-title">To quote Copier's docs:</p>
<p><em>Although Copier was born as a code scaffolding tool,
it is today a code lifecycle management tool. This makes it somehow unique.</em></p>
</div>
</details>
<h3 id="creating-a-template">Creating a template<a class="headerlink" href="#creating-a-template" title="Permanent link">Â¤</a></h3>
<p>To create a template using Copier, you have to know
<a href="https://jinja.palletsprojects.com/en/3.1.x/api/#basics">the basics of Jinja</a>.
Then you can simply read the <a href="https://copier.readthedocs.io/en/latest/#quick-start">Quickstart section</a> of Copier's docs.
This will give you an idea of what is possible. If you already know and use CookieCutter, you'll see that it's similar:
you can put the templated stuff into a subdirectory of your git repository.
One small difference is that the context is available globally rather than under the <code>cookiecutter</code> key.</p>
<p>A minimal Copier template could look like this:</p>
<div class="highlight"><pre><span></span><code>ð<span class="w"> </span>template/
âââ<span class="w"> </span>ð<span class="w"> </span>project/
â<span class="w">   </span>âââ<span class="w"> </span>ð<span class="w"> </span>README.md.jinja
âââ<span class="w"> </span>ð<span class="w"> </span>copier.yml
</code></pre></div>
<div class="highlight"><span class="filename">template/copier.yml</span><pre><span></span><code><span class="nt">_subdirectory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">project</span>

<span class="nt">project_name</span><span class="p">:</span>
<span class="w">  </span><span class="nt">help</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">What is your project name?</span>
</code></pre></div>
<div class="highlight"><span class="filename">template/project/README.md.jinja</span><pre><span></span><code><span class="gh"># {{ project_name }}</span>
</code></pre></div>
<h3 id="generating-a-project">Generating a project<a class="headerlink" href="#generating-a-project" title="Permanent link">Â¤</a></h3>
<p>To get a feel of what it's like to generate a project from a real-life template,
you can try to generate a project using my <code>copier-pdm</code> template.
Just run this in a terminal:</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span>pipx
pipx<span class="w"> </span>run<span class="w"> </span>copier<span class="w"> </span>gh:pawamoy/copier-pdm<span class="w"> </span>newproject
</code></pre></div>
<p><img alt="copier generate " src="../../assets/copier-pdm-generate.svg" /></p>
<p>An important thing to know is that you should immediately stage and commit
every generated file and folder, even if you want to delete some of them,
because this will help later during updates.</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>newproject
git<span class="w"> </span>init
git<span class="w"> </span>add<span class="w"> </span>-A
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;feat: Generate initial project&quot;</span>
<span class="c1"># now modify and commit as much as you want!</span>
</code></pre></div>
<h3 id="updating-generated-projects">Updating generated projects<a class="headerlink" href="#updating-generated-projects" title="Permanent link">Â¤</a></h3>
<p>Let say you just changed something in your template.
All you need to be able to update your projects generated from this template,
is to push a new tag, then go into your generated project(s) and run <code>copier -f update</code>.
Copier will automatically apply the modifications to your project,
while keeping the project's own changes intact.
You can review the changes in your favorite tool (VSCode "Source Control" tab, <code>git add -p</code>, etc.),
stage and commit. That's it!</p>
<p>You can see all my "template upgrade" commits on GitHub with this search:
<a href="https://github.com/search?q=chore%3A+Template+upgrade+user%3Apawamoy&amp;type=commits">"chore: Template upgrade user:pawamoy"</a>.</p>
<p>For more information on the update process,
see <a href="https://copier.readthedocs.io/en/stable/updating/#how-the-update-works">how the update works</a>.</p>
<h2 id="project-management-pdm">Project management: PDM<a class="headerlink" href="#project-management-pdm" title="Permanent link">Â¤</a></h2>
<p><img src="../../assets/pdm-logo.png" style="max-width: 300px;" /></p>
<p>Now that we have templates and can generate projects, we must choose a project management tool.
Traditional setups include <code>setuptools</code>' <code>setup.py</code> file, with some <code>MANIFEST.in</code> and <code>requirements.txt</code> files.
We can spice things up with <a href="https://github.com/jazzband/pip-tools/">pip-tools</a> or other alternatives.
We can use modern, minimalist tools like <a href="https://github.com/pypa/flit">Flit</a>.
Or we can use full-fledge, all-in-one managers like <a href="https://github.com/pypa/hatch">Hatch</a>,
<a href="https://python-poetry.org/">Poetry</a>, or <a href="https://pdm.fming.dev/">PDM</a>.</p>
<details class="info">
<summary>Story time: from Poetry to PDM</summary>
<p>When the community came to learn about Poetry, it was a revolution: finally a tool
that removed all the boilerplate and complexity around packaging and publishing Python projects.
Everything was declared in <code>pyproject.toml</code>, and nothing else.
You could manage your dependencies, virtualenvs being handled for you (great for beginners),
you could build wheels and source distributions and publish them to PyPI with simple commands
like <code>poetry build</code> and <code>poetry publish</code>. Poetry seriously improved the UX around project management
and packaging in the Python ecosystem. I'll forever be thankful for that.</p>
<p>But Poetry also took some annoying design decisions. They looked good at first,
but were a huge hindrance for projects, depending on their environment.
To make it short, I'm referring to this,
<a href="https://github.com/python-poetry/poetry/issues/1632">"Allow user to override PyPI URL without modifying pyproject.toml"</a>,
and other things like the inconsistencies in how to configure things / how the configuration is used,
and the lack of option to disable SSL verification.
I was maybe a bit thown-off by the complete absence of answer to my request for guidance in the PR I sent
(working change, just hard to test),
but I really can't blame them for this because they were literally assaulted with issues and PRs.</p>
<p>Then I learned about PDM. It had all the good things Poetry had, and it removed
the previously mentioned pain points, namely: it was able to read <code>pip</code>'s configuration.
It made using private indexes <em>so easy</em>: setup <code>pip</code>'s index-url and trusted-host and you're done.
Your own configuration does not contaminate other users through <code>pyproject.toml</code>
(note: PDM 2.0 doesn't read <code>pip</code>'s configuration anymore, but you can still configure
your index outside of <code>pyproject.toml</code>).</p>
<p>Even more interesting, it offered support for the (draft) <a href="https://peps.python.org/pep-0582/">PEP 582</a>.
Since then, it gained several other outstanding features, like a <a href="https://pnpm.io/">pnpm</a>-like cache,
a powerful plugin system, development dependencies groups, etc.
<a href="https://github.com/noirbizarre">@noirbizarre</a> posted a
<a href="https://github.com/pdm-project/pdm/discussions/1162#discussioncomment-3041456">very nice comment</a>
about PDM, summarizing all these wonderful features.
<a href="https://github.com/frostming">@frostming</a> is doing a fantastic job at maintaining PDM.</p>
</details>
<p>One of the main interests in using PDM is its ability to use
<a href="https://peps.python.org/pep-0582/">PEP 582</a>'s <code>__pypackages__</code> installation folders.
No more virtualenvs! Combined with its package cache, dependencies are installed
insanely fast, and your environment won't break when you update your Python versions.
Obviously, it also drastically reduces the disk-space taken by your dependencies.</p>
<p><img alt="pdm install" src="../../assets/pdm-install.svg" /></p>
<p>If you still want to use virtualenvs, PDM natively supports them as well,
and can manage them for you, just like Poetry.</p>
<h3 id="installing-and-using-pdm">Installing and using PDM<a class="headerlink" href="#installing-and-using-pdm" title="Permanent link">Â¤</a></h3>
<p>My recommandation to install PDM is to use <a href="https://pypa.github.io/pipx/">pipx</a>:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span>pipx
pipx<span class="w"> </span>install<span class="w"> </span>pdm
</code></pre></div>
<p>I also like to enable PEP 582 support globally
(<a href="https://pdm.fming.dev/latest/usage/pep582/#enable-pep-582-globally">docs</a>),
so that <code>python</code> is always aware of packages installed in a <code>__pypackages__</code> folder:</p>
<div class="highlight"><pre><span></span><code>pdm<span class="w"> </span>--pep582<span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bash_profile
</code></pre></div>
<p>The commands written to <code>.bash_profile</code> simply add a subfolder of PDM to the <code>PYTHONPATH</code>
environment variable. This folder contains a <code>sitecustomize.py</code> module,
which Python executes upon starting. The module in turn will add subfolders
of <code>__pypackages__</code> (when it exists) to <code>sys.path</code>. The end result is
that you can run <code>python</code> and import dependencies normally,
or even call modules with <code>python -m thing</code>,
without having to use <code>pdm run python ...</code>. One limitation
is that you still won't be able to call installed script directly,
for example <code>pytest</code>, like in an activated virtual environment.
For this, you'll have to run <code>pdm run pytest</code> (but remember that
if packages support it, you can run <code>python -m pytest</code> instead).</p>
<h3 id="declaring-your-project-metadata">Declaring your project metadata<a class="headerlink" href="#declaring-your-project-metadata" title="Permanent link">Â¤</a></h3>
<p>PDM reads project metadata in <code>pyproject.toml</code>.
It relies on <a href="https://peps.python.org/pep-0517/">PEP 517</a> (build system)
and <a href="https://peps.python.org/pep-0621/">PEP 621</a> (project metadata):</p>
<div class="highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span class="k">[build-system]</span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;pdm-pep517&quot;</span><span class="p">]</span>
<span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;pdm.pep517.api&quot;</span>

<span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;package-name&quot;</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;The package description.&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;0.1.0&quot;</span>
<span class="n">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;TimothÃ©e Mazzucotelli&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;dev@pawamoy.fr&quot;</span><span class="p">}]</span>
<span class="n">license</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ISC&quot;</span>
<span class="n">readme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;README.md&quot;</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&gt;=3.7&quot;</span>
<span class="n">keywords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;some&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;keywords&quot;</span><span class="p">]</span>
<span class="n">classifiers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s">&quot;Development Status :: 4 - Beta&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;Intended Audience :: Developers&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;Programming Language :: Python&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;Programming Language :: Python :: 3&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;Programming Language :: Python :: 3 :: Only&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;Typing :: Typed&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>
<p>This example hardcodes the version but you can
<a href="https://pdm.fming.dev/2.1/pyproject/build/#dynamic-version-from-scm">fetch it from SCM</a>
(Git tags).</p>
<p>Projects using the <a href="https://blog.ionelmc.ro/2014/05/25/python-packaging/"><code>src</code> layout</a> are supported:</p>
<div class="highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span class="k">[tool.pdm.build]</span>
<span class="n">package-dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;src&quot;</span>
</code></pre></div>
<h3 id="declaring-your-dependencies">Declaring your dependencies<a class="headerlink" href="#declaring-your-dependencies" title="Permanent link">Â¤</a></h3>
<p>Dependencies and optional dependencies can be declared as specified by PEP 621:</p>
<div class="highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span class="k">[project]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">   </span><span class="s">&quot;griffe&gt;0.22&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">[project.optional-dependencies]</span>
<span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s">&quot;pytest&gt;=7.1&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>
<p>Note that this is not specific to PDM. Any tool that relies on PEP 621
will be able to read these dependencies.</p>
<p>Development dependencies however are not specified by PEP 621,
so the next part is specific to PDM and will not work with other dependencies managers.
Development dependencies can be separated into multiple groups,
just like optional dependencies:</p>
<div class="highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span class="k">[tool.pdm.dev-dependencies]</span>
<span class="n">docs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s">&quot;mkdocs&gt;=1.3&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;mkdocs-material&gt;=7.3&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;mkdocstrings[python]&gt;=0.18&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;markdown-exec&gt;=0.5&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s">&quot;pytest&gt;=6.2&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;pytest-cov&gt;=3.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;pytest-randomly&gt;=3.10&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;pytest-xdist&gt;=2.4&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>
<p>When installing dependencies, you can then select all of them, or specific groups only:</p>
<div class="highlight"><pre><span></span><code>pdm<span class="w"> </span>install<span class="w">  </span><span class="c1"># installs everything</span>
pdm<span class="w"> </span>install<span class="w"> </span>--prod<span class="w">  </span><span class="c1"># installs production dependencies only</span>
pdm<span class="w"> </span>install<span class="w"> </span>-G<span class="w"> </span>docs<span class="w">  </span><span class="c1"># installs production dependencies and docs group</span>
pdm<span class="w"> </span>install<span class="w"> </span>--no-default<span class="w"> </span>-G<span class="w"> </span>docs<span class="w"> </span>-G<span class="w"> </span>tests<span class="w">  </span><span class="c1"># installs docs and tests groups only</span>
</code></pre></div>
<h3 id="building-and-publishing-wheels">Building and publishing wheels<a class="headerlink" href="#building-and-publishing-wheels" title="Permanent link">Â¤</a></h3>
<p>To build source and wheel distributions, simply run <code>pdm build</code>.
To publish them, simply run <code>pdm publish</code>! Or use <a href="https://twine.readthedocs.io/en/stable/">Twine</a>.</p>
<p>It is possible to customize the build process, see PDM's docs for more info.</p>
<h2 id="task-runner-duty">Task runner: duty<a class="headerlink" href="#task-runner-duty" title="Permanent link">Â¤</a></h2>
<p>At this point we are able to declare and install dependencies and development dependencies.
We will want to use some of them to run quality analysis and execute test suites.</p>
<p><a href="https://pdm.fming.dev/2.1/usage/scripts/">PDM supports npm-like scripts</a>,
but I don't use them because I find them not expressive/powerful enough.
I prefer writing my tasks with the full power of Python.
That makes them more verbose, but way more flexible,
and you can use code from dependencies directly instead of calling subprocesses.</p>
<p>I tried many task runners and eventually ended up writing my own: <a href="https://pawamoy.github.io/duty/">duty</a>.</p>
<details class="info">
<summary>Story time: from tox to Invoke to duty, and why not nox</summary>
<p>A few years ago, when I was writing Django-apps, I was using <a href="https://tox.wiki/en/latest/">tox</a>
to test my apps on multiple Django versions. I was happy with it, but found it a bit slow
when running jobs on a P*D-sized matrix (Python versions, Django versions).
Fortunately <a href="https://github.com/tox-dev/detox">detox</a> was able to run tox envs in parallel.</p>
<p>At some point I stopped writing Django apps, and started searching an alternative
to tox with a lighter output, because I really don't like seeing <em>walls</em> of text
when a single line is enough (test passed? just print ok).</p>
<p>I started playing with <a href="https://www.pyinvoke.org/">Invoke</a>,
but quickly had issues with it,
notably <a href="https://github.com/pyinvoke/invoke/issues/763">in Windows runs on GitHub</a>.
I also felt limited in that I couldn't run Python code directly, only subprocesses.
I tried to implement such a feature in Invoke, but couldn't manage to do it.</p>
<p>I also played with <a href="https://nox.thea.codes/en/stable/">Nox</a>, but found it
too slow as well, even when reusing virtualenvs. And the console output was again
too heavy for my taste. Now that <a href="https://pdm.fming.dev/2.1/usage/advanced/#use-nox-as-the-runner">PDM supports Nox</a>,
I should definitely give it another try though!</p>
<p>In the end, I wrote my own task runner, duty, which is heavily inspired by Invoke.</p>
</details>
<p>With duty, tasks are declared by default in a <code>duties.py</code> file at the root of the repository.
You import the decorator, and decorate functions with it:</p>
<div class="highlight"><span class="filename">duties.py</span><pre><span></span><code><span class="kn">from</span> <span class="nn">duty</span> <span class="kn">import</span> <span class="n">duty</span>


<span class="nd">@duty</span>
<span class="k">def</span> <span class="nf">lint</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;flake8 src&quot;</span><span class="p">)</span>
</code></pre></div>
<p>You can then run decorated function (duties) on the command line: <code>duty lint</code>.</p>
<p>The <code>ctx</code> (for context) argument is injected by duty when running the task.
Its <code>run</code> method accepts strings (shell commands), list of strings, and Python callables.
Yes, you can run callables directly, no need for subprocesses.
Depending on the library, it will be easy or hard to replace the subprocess
with a direct call:</p>
<div class="highlight"><span class="filename">duties.py</span><pre><span></span><code><span class="kn">from</span> <span class="nn">duty</span> <span class="kn">import</span> <span class="n">duty</span>


<span class="nd">@duty</span>
<span class="k">def</span> <span class="nf">lint</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">flake8.main.cli</span> <span class="kn">import</span> <span class="n">main</span> <span class="k">as</span> <span class="n">flake8</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">flake8</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span>


<span class="nd">@duty</span>
<span class="k">def</span> <span class="nf">docs</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">mkdocs.__main__</span> <span class="kn">import</span> <span class="n">cli</span> <span class="k">as</span> <span class="n">mkdocs</span>
    <span class="n">cli</span><span class="p">([</span><span class="s2">&quot;build&quot;</span><span class="p">])</span>
</code></pre></div>
<p><strong>I urge Python developers to expose their CLI entrypoint outside of <code>__main__</code>,
and to make it accept command line parameters.</strong> Otherwise we have
to import from <code>__main__</code>, and/or patch <code>sys.argv</code>, which is ugly.
Library first, CLI second!</p>
<p>In the worst cases, you'll have to rebuild part of the CLI logic
by copy/pasting code to make it work. For these cases,
maybe it's easier to just run a subprocess.</p>
<p>By default, duty will print the command that runs, and update
the line with a check mark if it returns a success value
(0 for subprocess, 0, None, True or truthy value for callables).
If the command fails (non-zero, False or exception),
duty will also print the captured output.
Bye bye walls of text, hello very sexy output!</p>
<p>Success:</p>
<p><img alt="duty success" src="../../assets/duty-success.svg" /></p>
<p>Failure:</p>
<p><img alt="duty failure" src="../../assets/duty-failure.svg" /></p>
<p>You can also output <a href="http://testanything.org/"><code>tap</code></a>.
Refer to <a href="https://pawamoy.github.io/duty/usage/">duty's documentation</a> for many more examples.</p>
<h3 id="project-setup-running-tasks">Project setup, running tasks<a class="headerlink" href="#project-setup-running-tasks" title="Permanent link">Â¤</a></h3>
<p>When I clone one of my projects, I want to be able to set it up
in one command. Setting it up is basically installing the dependencies.
With PDM, that command would be <code>pdm install</code>.
But that installs dependencies for only one Python version,
and since I'm not using tox or nox, I need to install
dependencies for every Python version I want to support.</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="w"> </span>py<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">3</span>.7<span class="w"> </span><span class="m">3</span>.8<span class="w"> </span><span class="m">3</span>.9<span class="w"> </span><span class="m">3</span>.10<span class="w"> </span><span class="m">3</span>.11<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span>pdm<span class="w"> </span>use<span class="w"> </span>-f<span class="w"> </span>python<span class="nv">$py</span>
<span class="w">    </span>pdm<span class="w"> </span>install
<span class="k">done</span>
</code></pre></div>
<p>Again, I'm not using tox or nox, and I also need to be able
to run some tasks on all supported Python versions.
Typically tests, but quality analysis as well,
because it needs to pass whatever the Python version is.</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="w"> </span>py<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">3</span>.7<span class="w"> </span><span class="m">3</span>.8<span class="w"> </span><span class="m">3</span>.9<span class="w"> </span><span class="m">3</span>.10<span class="w"> </span><span class="m">3</span>.11<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span>pdm<span class="w"> </span>use<span class="w"> </span>-f<span class="w"> </span>python<span class="nv">$py</span>
<span class="w">    </span>pdm<span class="w"> </span>run<span class="w"> </span>duty<span class="w"> </span><span class="nb">test</span>
<span class="k">done</span>
</code></pre></div>
<p>The end result is that I have two Bash scripts,
<a href="https://github.com/pawamoy/copier-pdm/blob/0.10.1/project/scripts/setup.sh"><code>setup.sh</code></a> and
<a href="https://github.com/pawamoy/copier-pdm/blob/0.10.1/project/scripts/multirun.sh"><code>multirun.sh</code></a>
in a scripts folder. Bash is usually available, even on Windows thanks
to <a href="https://gitforwindows.org/">Git-for-Windows</a>. However I don't want
to run these scripts with <code>bash scripts/setup.sh</code> or <code>./scripts/multirun.sh duty test</code>.
It's way too long to type. So I decided to also write a Makefile.
Make is not easily available on Windows, so I lose a bit of cross-platformness,
but it's just so convenient on GNU/Linux systems.</p>
<p><a href="https://github.com/pawamoy/copier-pdm/blob/0.10.1/project/Makefile.jinja">Checkout my Makefile on GitHub.</a></p>
<p>With this Makefile, I can simply type <code>make setup</code> after cloning a project.
This action will try to install pipx if it's not available,
and then it will try to install PDM with pipx if it's not available.
Finally, it will run <code>pdm install</code> for a defined set of Python versions
(at the time of writing: 3.7 up to 3.11).</p>
<p>I can also type <code>make format</code>, or <code>make check</code>, or <code>make test</code>,
and depending on the action, it will run it only once, using
the Python version currently selected through PDM, or run it
on all supported Python versions.</p>
<p>If my duties (tasks) accept arguments, I can pass them
from the command line: <code>make release version=1.0.0</code>,
or <code>make test match="this or that"</code>.</p>
<p>Once I fixed something or added a new feature,
and wrote tests for it, I can format my code, check its quality,
run the tests, generate a coverage HTML report, generate
a changelog entry, commit everything, build and publish
a new release, and then publish docs <em>with a single line</em>:</p>
<div class="highlight"><pre><span></span><code>make<span class="w"> </span>format<span class="w"> </span>check<span class="w"> </span><span class="nb">test</span><span class="w"> </span>coverage<span class="w"> </span>changelog<span class="w"> </span>release<span class="w"> </span><span class="nv">version</span><span class="o">=</span><span class="m">2</span>.13.1
</code></pre></div>
<p>No time is lost installing dependencies for each task
since I pre-installed my dependencies for every Python version,
and all the output is unified and minimal, showing details
only if something went wrong.</p>
<p>Here's a real run that published <a href="https://pypi.org/project/dependenpy/">dependenpy v3.3.2 on pypi.org</a>:</p>
<p><img alt="make all" src="../../assets/make-all.svg" /></p>
<p>The next sections will present each action (format, check, test, etc.) in details.</p>
<h3 id="quality-analysis">Quality analysis<a class="headerlink" href="#quality-analysis" title="Permanent link">Â¤</a></h3>
<p>I typically split quality analysis in two: code quality and type-checking.</p>
<p>For static typing analysis, I use <a href="http://mypy-lang.org/">mypy</a>.</p>
<p><img src="../../assets/mypy-light.svg" style="max-width: 300px;" /></p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="duty" name="__tabbed_1" type="radio" /><input id="mypy-config" name="__tabbed_1" type="radio" /><input id="output" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="duty">duty</label><label for="mypy-config">mypy config</label><label for="output">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">duties.py</span><pre><span></span><code><span class="nd">@duty</span>
<span class="k">def</span> <span class="nf">check_types</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;mypy --config-file config/mypy.ini src&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Type-checking&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>My configuration file is very basic and not very strict.
It can probably be improved a lot.</p>
<div class="highlight"><span class="filename">config/mypy.ini</span><pre><span></span><code><span class="k">[mypy]</span>
<span class="na">ignore_missing_imports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span>
<span class="na">warn_unused_ignores</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span>
<span class="na">show_error_codes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>make<span class="w"> </span>check-types
<span class="go">&gt; Currently selected Python version: python3.10</span>
<span class="go">&gt; pdm run duty check-types (python3.7)</span>
<span class="go">â Type-checking</span>
<span class="go">&gt; pdm run duty check-types (python3.8)</span>
<span class="go">â Type-checking</span>
<span class="go">&gt; pdm run duty check-types (python3.9)</span>
<span class="go">â Type-checking</span>
<span class="go">&gt; pdm run duty check-types (python3.10)</span>
<span class="go">â Type-checking</span>
<span class="go">&gt; pdm run duty check-types (python3.11)</span>
<span class="go">â Type-checking</span>
<span class="go">&gt; Restored previous Python version: python3.10</span>
</code></pre></div>
</div>
</div>
</div>
<hr />
<p>For code quality analysis, I use <a href="https://flake8.pycqa.org/en/latest/">Flake8</a>
with a battery of plugins:</p>
<ul>
<li><a href="https://pypi.org/project/darglint/">darglint</a>:
    docstrings linter that checks (missing) parameters, returns and exceptions in docstrings</li>
<li><a href="https://pypi.org/project/flake8-bandit/">flake8-bandit</a>:
    plugin that integrates <a href="https://pypi.org/project/bandit/">Bandit</a></li>
<li><a href="https://pypi.org/project/flake8-black/">flake8-black</a>:
    plugin that checks if <a href="https://pypi.org/project/black/">Black</a> would make changes</li>
<li><a href="https://pypi.org/project/flake8-bugbear/">flake8-bugbear</a>:
    "finds likely bugs and design problems in your program"</li>
<li><a href="https://pypi.org/project/flake8-builtins/">flake8-builtins</a>:
    checks that you don't shadow builtins with variables or parameters</li>
<li><a href="https://pypi.org/project/flake8-comprehensions/">flake8-comprehensions</a>:
    helps you write better list/set/dict comprehensions</li>
<li><a href="https://pypi.org/project/flake8-docstrings/">flake8-docstrings</a>:
    plugin that integrates <a href="https://github.com/pycqa/pydocstyle">pydocstyle</a></li>
<li><a href="https://pypi.org/project/flake8-pytest-style/">flake8-pytest-style</a>:
    checks common style issues or inconsistencies with pytest-based tests</li>
<li><a href="https://pypi.org/project/flake8-string-format/">flake8-string-format</a>:
    checks formatted-strings and f-strings for errors</li>
<li><a href="https://pypi.org/project/flake8-tidy-imports/">flake8-tidy-imports</a>:
    I use this one to forbid relative imports</li>
<li><a href="https://pypi.org/project/flake8-variables-names/">flake8-variables-names</a>:
    helps to write more readable variables names</li>
<li><a href="https://pypi.org/project/pep8-naming/">pep8-naming</a>:
    famous PEP8 checks</li>
<li><a href="https://pypi.org/project/wps-light/">wps-light</a>:
    a lighter fork (no dependencies)
    of <a href="https://pypi.org/project/wemake-python-styleguide/">wemake-python-styleguide</a>,
    a very strict and opinionated plugin for Flake8. You'll see that I disable
    a good part of its warnigns in my template, because they feel
    too cumbersome to me. The rest of the warnings can be annoying,
    but are very valuable to me: they definitely force you to write
    more readable and maintainable code.</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="duty_1" name="__tabbed_2" type="radio" /><input id="flake8-config" name="__tabbed_2" type="radio" /><input id="output_1" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="duty_1">duty</label><label for="flake8-config">Flake8 config</label><label for="output_1">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">duties.py</span><pre><span></span><code><span class="nd">@duty</span>
<span class="k">def</span> <span class="nf">check_quality</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="s2">&quot;src tests&quot;</span><span class="p">):</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;flake8 --config=config/flake8.ini </span><span class="si">{</span><span class="n">files</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Checking code quality&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">config/flake8.ini</span><pre><span></span><code><span class="k">[flake8]</span>
<span class="na">exclude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">fixtures,site</span>
<span class="na">max-line-length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">132</span>
<span class="na">docstring-convention</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">google</span>
<span class="na">ban-relative-imports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span>
<span class="na">ignore</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">...</span>
</code></pre></div>
<p>I truncated the file because it is a bit long, please
<a href="https://github.com/pawamoy/copier-pdm/blob/0.10.1/project/config/flake8.ini">check it out on GitHub</a>.</p>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>make<span class="w"> </span>check-quality
<span class="go">&gt; Currently selected Python version: python3.10</span>
<span class="go">&gt; pdm run duty check-types (python3.7)</span>
<span class="go">â Checking code quality</span>
<span class="go">&gt; pdm run duty check-types (python3.8)</span>
<span class="go">â Checking code quality</span>
<span class="go">&gt; pdm run duty check-types (python3.9)</span>
<span class="go">â Checking code quality</span>
<span class="go">&gt; pdm run duty check-types (python3.10)</span>
<span class="go">â Checking code quality</span>
<span class="go">&gt; pdm run duty check-types (python3.11)</span>
<span class="go">â Checking code quality</span>
<span class="go">&gt; Restored previous Python version: python3.10</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="code-formatters">Code formatters<a class="headerlink" href="#code-formatters" title="Permanent link">Â¤</a></h3>
<p>Code formatting is done in three steps:</p>
<ol>
<li>remove unused imports using <a href="https://github.com/PyCQA/autoflake">autoflake</a></li>
<li>sort imports using <a href="https://pycqa.github.io/isort/">isort</a></li>
<li>format code using <a href="https://github.com/psf/black">Black</a></li>
</ol>
<div class="tabbed-set tabbed-alternate" data-tabs="3:3"><input checked="checked" id="duty_2" name="__tabbed_3" type="radio" /><input id="black-and-isort-configs" name="__tabbed_3" type="radio" /><input id="output_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="duty_2">duty</label><label for="black-and-isort-configs">Black and isort configs</label><label for="output_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">duties.py</span><pre><span></span><code><span class="nd">@duty</span>
<span class="k">def</span> <span class="nf">format</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
        <span class="s2">&quot;autoflake -ir --exclude tests/fixtures --remove-all-unused-imports src/ tests/&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Removing unused imports&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;isort src/ tests/&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Ordering imports&quot;</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;black src/ tests/&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Formatting code&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span class="k">[tool.black]</span>
<span class="n">line-length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">120</span>
<span class="n">exclude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;tests/fixtures&quot;</span>

<span class="k">[tool.isort]</span>
<span class="n">line_length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">120</span>
<span class="n">not_skip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;__init__.py&quot;</span>
<span class="n">multi_line_output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span>
<span class="n">force_single_line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">balanced_wrapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">default_section</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;THIRDPARTY&quot;</span>
<span class="n">known_first_party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;markdown_exec&quot;</span>
<span class="n">include_trailing_comma</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>make<span class="w"> </span>format
<span class="go">â Removing unused imports</span>
<span class="go">â Ordering imports</span>
<span class="go">â Formatting code</span>
</code></pre></div>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Idea: use ssort</p>
<p>I'm also looking at <a href="https://github.com/bwhmather/ssort">ssort</a>,
but it probably needs some enhancements before we're able to use it.</p>
</div>
<h3 id="security-analysis">Security analysis<a class="headerlink" href="#security-analysis" title="Permanent link">Â¤</a></h3>
<p>Security analysis is partly with <a href="https://github.com/pyupio/safety">safety</a>,
which queries a curated PyUP.io database to show dependencies that are vulnerable.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="duty_3" name="__tabbed_4" type="radio" /><input id="output_3" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="duty_3">duty</label><label for="output_3">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>The duty is a bit long here, because I try to ensure
safety's modules are not patched by malicious packages installed
in the current environment. Rebuilding the CLI logic also allows
us to lighten up or even rework the output.</p>
<div class="highlight"><span class="filename">duties.py</span><pre><span></span><code><span class="nd">@duty</span>
<span class="k">def</span> <span class="nf">check_dependencies</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># undo possible patching</span>
    <span class="c1"># see https://github.com/pyupio/safety/issues/348</span>
    <span class="k">for</span> <span class="n">module</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>  <span class="c1"># noqa: WPS528</span>
        <span class="k">if</span> <span class="n">module</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;safety.&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">module</span> <span class="o">==</span> <span class="s2">&quot;safety&quot;</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">module</span><span class="p">]</span>  <span class="c1"># noqa: WPS420</span>

    <span class="n">importlib</span><span class="o">.</span><span class="n">invalidate_caches</span><span class="p">()</span>

    <span class="c1"># reload original, unpatched safety</span>
    <span class="kn">from</span> <span class="nn">safety.formatter</span> <span class="kn">import</span> <span class="n">SafetyFormatter</span>
    <span class="kn">from</span> <span class="nn">safety.safety</span> <span class="kn">import</span> <span class="n">calculate_remediations</span>
    <span class="kn">from</span> <span class="nn">safety.safety</span> <span class="kn">import</span> <span class="n">check</span> <span class="k">as</span> <span class="n">safety_check</span>
    <span class="kn">from</span> <span class="nn">safety.util</span> <span class="kn">import</span> <span class="n">read_requirements</span>

    <span class="c1"># retrieve the list of dependencies</span>
    <span class="n">requirements</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">&quot;pdm&quot;</span><span class="p">,</span> <span class="s2">&quot;export&quot;</span><span class="p">,</span> <span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;requirements&quot;</span><span class="p">,</span> <span class="s2">&quot;--without-hashes&quot;</span><span class="p">],</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Exporting dependencies as requirements&quot;</span><span class="p">,</span>
        <span class="n">allow_overrides</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># check using safety as a library</span>
    <span class="k">def</span> <span class="nf">safety</span><span class="p">():</span>
        <span class="n">packages</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">read_requirements</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">requirements</span><span class="p">)))</span>
        <span class="n">vulns</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">safety_check</span><span class="p">(</span><span class="n">packages</span><span class="o">=</span><span class="n">packages</span><span class="p">,</span> <span class="n">ignore_vulns</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">output_report</span> <span class="o">=</span> <span class="n">SafetyFormatter</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">render_vulnerabilities</span><span class="p">(</span>
            <span class="n">announcements</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">vulnerabilities</span><span class="o">=</span><span class="n">vulns</span><span class="p">,</span>
            <span class="n">remediations</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">full</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">packages</span><span class="o">=</span><span class="n">packages</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">vulns</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">output_report</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">safety</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Checking dependencies&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>make<span class="w"> </span>check-dependencies
<span class="go">â Exporting dependencies as requirements</span>
<span class="go">â Checking dependencies (1)</span>
<span class="go">  &gt; safety()</span>
<span class="go">  +==============================================================================+</span>

<span class="go">                                    /$$$$$$            /$$</span>
<span class="go">                                    /$$__  $$          | $$</span>
<span class="go">                /$$$$$$$  /$$$$$$ | $$  \__//$$$$$$  /$$$$$$   /$$   /$$</span>
<span class="go">                /$$_____/ |____  $$| $$$$   /$$__  $$|_  $$_/  | $$  | $$</span>
<span class="go">              |  $$$$$$   /$$$$$$$| $$_/  | $$$$$$$$  | $$    | $$  | $$</span>
<span class="go">                \____  $$ /$$__  $$| $$    | $$_____/  | $$ /$$| $$  | $$</span>
<span class="go">                /$$$$$$$/|  $$$$$$$| $$    |  $$$$$$$  |  $$$$/|  $$$$$$$</span>
<span class="go">              |_______/  \_______/|__/     \_______/   \___/   \____  $$</span>
<span class="go">                                                                /$$  | $$</span>
<span class="go">                                                              |  $$$$$$/</span>
<span class="go">        by pyup.io                                              \______/</span>

<span class="go">  +==============================================================================+</span>

<span class="go">  REPORT </span>

<span class="go">    Safety v2.1.1 is scanning for Vulnerabilities...</span>
<span class="go">    Scanning dependencies in your environment:</span>

<span class="go">    -&gt; temp_file</span>

<span class="go">    Using non-commercial database</span>
<span class="go">    Found and scanned 118 packages</span>
<span class="go">    Timestamp 2022-09-04 14:18:55</span>
<span class="go">    3 vulnerabilities found</span>
<span class="go">    0 vulnerabilities ignored</span>

<span class="go">  +==============================================================================+</span>
<span class="go">  VULNERABILITIES FOUND</span>
<span class="go">  +==============================================================================+</span>

<span class="go">  -&gt; Vulnerability found in numpy version 1.21.1</span>
<span class="go">    Vulnerability ID: 44716</span>
<span class="go">    Affected spec: &lt;1.22.0</span>
<span class="go">    ADVISORY: Numpy 1.22.0 includes a fix for CVE-2021-41496: Buffer</span>
<span class="go">    overflow in the array_from_pyobj function of fortranobject.c, which allows</span>
<span class="go">    attackers to conduct a Denial of Service attacks by carefully constructing an</span>
<span class="go">    array with negative values. NOTE: The vendor does not agree this is a</span>
<span class="go">    vulnerability; the negative dimensions can only be created by an already</span>
<span class="go">    privileged user (or internally).https://github.com/numpy/numpy/issues/19000</span>
<span class="go">    CVE-2021-41496</span>
<span class="go">    For more information, please visit</span>
<span class="go">    https://pyup.io/vulnerabilities/CVE-2021-41496/44716/</span>


<span class="go">  -&gt; Vulnerability found in numpy version 1.21.1</span>
<span class="go">    Vulnerability ID: 44717</span>
<span class="go">    Affected spec: &lt;1.22.0</span>
<span class="go">    ADVISORY: Numpy 1.22.0 includes a fix for CVE-2021-34141: An</span>
<span class="go">    incomplete string comparison in the numpy.core component in NumPy before</span>
<span class="go">    1.22.0 allows attackers to trigger slightly incorrect copying by constructing</span>
<span class="go">    specific string objects. NOTE: the vendor states that this reported code</span>
<span class="go">    behavior is &quot;completely harmless.&quot;https://github.com/numpy/numpy/issues/18993</span>
<span class="go">    CVE-2021-34141</span>
<span class="go">    For more information, please visit</span>
<span class="go">    https://pyup.io/vulnerabilities/CVE-2021-34141/44717/</span>


<span class="go">  -&gt; Vulnerability found in numpy version 1.21.1</span>
<span class="go">    Vulnerability ID: 44715</span>
<span class="go">    Affected spec: &lt;1.22.2</span>
<span class="go">    ADVISORY: Numpy 1.22.2  includes a fix for CVE-2021-41495: Null</span>
<span class="go">    Pointer Dereference vulnerability exists in numpy.sort in NumPy in the</span>
<span class="go">    PyArray_DescrNew function due to missing return-value validation, which</span>
<span class="go">    allows attackers to conduct DoS attacks by repetitively creating sort arrays.</span>
<span class="go">    NOTE: While correct that validation is missing, an error can only occur due</span>
<span class="go">    to an exhaustion of memory. If the user can exhaust memory, they are already</span>
<span class="go">    privileged. Further, it should be practically impossible to construct an</span>
<span class="go">    attack which can target the memory exhaustion to occur at exactly this</span>
<span class="go">    place.https://github.com/numpy/numpy/issues/19038</span>
<span class="go">    CVE-2021-41495</span>
<span class="go">    For more information, please visit</span>
<span class="go">    https://pyup.io/vulnerabilities/CVE-2021-41495/44715/</span>

<span class="go">  Scan was completed. 3 vulnerabilities were found. </span>

<span class="go">  +==============================================================================+</span>

<span class="go">make: *** [Makefile:49: check-dependencies] Error 1</span>
</code></pre></div>
</div>
</div>
</div>
<p>I'm considering using/creating tooling around the <a href="https://osv.dev/">OSV database</a> instead.</p>
<p>The <a href="#quality-analysis">code quality analysis</a>, presented earlier,
also checks the code for security risks using Bandit.</p>
<h3 id="test-suite">Test suite<a class="headerlink" href="#test-suite" title="Permanent link">Â¤</a></h3>
<p>Tests are written and executed using <a href="https://docs.pytest.org/en/7.1.x/">pytest</a> and plugins:</p>
<ul>
<li>sometimes <a href="https://pypi.org/project/pytest-asyncio/">pytest-asyncio</a>,
    to test asynchronous code</li>
<li><a href="https://pypi.org/project/pytest-cov/">pytest-cov</a>,
    which uses <a href="https://github.com/nedbat/coveragepy">Coverage.py</a>
    to build code coverage reports</li>
<li><a href="https://pypi.org/project/pytest-randomly/">pytest-randomly</a>,
    to randomize the order of tests, to make sure each test is independant from the others</li>
<li><a href="https://pypi.org/project/pytest-xdist/">pytest-xdist</a>,
    to run tests in parallel and therefore speed up the test runs</li>
<li>sometimes <a href="https://hypothesis.readthedocs.io/en/latest/">hypothesis</a>,
    to test huge ranges of input values</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="5:4"><input checked="checked" id="duty_4" name="__tabbed_5" type="radio" /><input id="pytest-config" name="__tabbed_5" type="radio" /><input id="coverage-config" name="__tabbed_5" type="radio" /><input id="output_4" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="duty_4">duty</label><label for="pytest-config">pytest config</label><label for="coverage-config">coverage config</label><label for="output_4">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">duties.py</span><pre><span></span><code><span class="nd">@duty</span><span class="p">(</span><span class="n">silent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">coverage</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;coverage combine&quot;</span><span class="p">,</span> <span class="n">nofail</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;coverage report --rcfile=config/coverage.ini&quot;</span><span class="p">,</span> <span class="n">capture</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;coverage html --rcfile=config/coverage.ini&quot;</span><span class="p">)</span>


<span class="nd">@duty</span>
<span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">match</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="n">py_version</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span><span class="si">}{</span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">minor</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;COVERAGE_FILE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;.coverage.</span><span class="si">{</span><span class="n">py_version</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">&quot;pytest&quot;</span><span class="p">,</span> <span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="s2">&quot;config/pytest.ini&quot;</span><span class="p">,</span> <span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span> <span class="s2">&quot;-k&quot;</span><span class="p">,</span> <span class="n">match</span><span class="p">,</span> <span class="s2">&quot;tests&quot;</span><span class="p">],</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Running tests&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">config/pytest.ini</span><pre><span></span><code><span class="k">[pytest]</span>
<span class="na">norecursedirs</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="na">.git</span>
<span class="w">  </span><span class="na">.tox</span>
<span class="w">  </span><span class="na">.env</span>
<span class="w">  </span><span class="na">dist</span>
<span class="w">  </span><span class="na">build</span>
<span class="na">python_files</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="na">test_*.py</span>
<span class="w">  </span><span class="na">*_test.py</span>
<span class="w">  </span><span class="na">tests.py</span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="na">--cov</span>
<span class="w">  </span><span class="na">--cov-config config/coverage.ini</span>
<span class="na">testpaths</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="na">tests</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">config/coverage.ini</span><pre><span></span><code><span class="k">[coverage:run]</span>
<span class="na">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span>
<span class="na">parallel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span>
<span class="na">source</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="na">src/</span>
<span class="w">  </span><span class="na">tests/</span>

<span class="k">[coverage:paths]</span>
<span class="na">equivalent</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="na">src/</span>
<span class="w">  </span><span class="na">__pypackages__/</span>

<span class="k">[coverage:report]</span>
<span class="na">precision</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
<span class="na">omit</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="na">src/*/__init__.py</span>
<span class="w">  </span><span class="na">src/*/__main__.py</span>
<span class="w">  </span><span class="na">tests/__init__.py</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>make<span class="w"> </span><span class="nb">test</span><span class="w"> </span>coverage
<span class="go">&gt; Currently selected Python version: python3.10</span>
<span class="go">&gt; pdm run duty test (python3.7)</span>
<span class="go">â Running tests</span>
<span class="go">&gt; pdm run duty test (python3.8)</span>
<span class="go">â Running tests</span>
<span class="go">&gt; pdm run duty test (python3.9)</span>
<span class="go">â Running tests</span>
<span class="go">&gt; pdm run duty test (python3.10)</span>
<span class="go">â Running tests</span>
<span class="go">&gt; pdm run duty test (python3.11)</span>
<span class="go">â Running tests</span>
<span class="go">&gt; Restored previous Python version: python3.10</span>
<span class="go">Name                                       Stmts   Miss Branch BrPart     Cover</span>
<span class="go">-------------------------------------------------------------------------------</span>
<span class="go">src/markdown_exec/formatters/base.py          26      2      6      2    87.50%</span>
<span class="go">src/markdown_exec/formatters/bash.py          12      6      0      0    50.00%</span>
<span class="go">src/markdown_exec/formatters/console.py       33     23     10      0    23.26%</span>
<span class="go">src/markdown_exec/formatters/markdown.py       4      1      2      0    50.00%</span>
<span class="go">src/markdown_exec/formatters/pycon.py         33     23     10      0    23.26%</span>
<span class="go">src/markdown_exec/formatters/python.py        24      0      6      0   100.00%</span>
<span class="go">src/markdown_exec/formatters/sh.py            12      0      0      0   100.00%</span>
<span class="go">src/markdown_exec/formatters/tree.py          43      9     14      2    70.18%</span>
<span class="go">src/markdown_exec/logger.py                   20      4      4      0    75.00%</span>
<span class="go">src/markdown_exec/mkdocs_plugin.py            25     25      6      0     0.00%</span>
<span class="go">src/markdown_exec/rendering.py                82     32     38      5    54.17%</span>
<span class="go">tests/conftest.py                              7      0      2      0   100.00%</span>
<span class="go">tests/test_python.py                          17      0      0      0   100.00%</span>
<span class="go">tests/test_shell.py                           12      0      0      0   100.00%</span>
<span class="go">tests/test_tree.py                             5      0      0      0   100.00%</span>
<span class="go">tests/test_validator.py                        6      0      0      0   100.00%</span>
<span class="go">-------------------------------------------------------------------------------</span>
<span class="go">TOTAL                                        361    125     98      9    59.04%</span>
</code></pre></div>
</div>
</div>
</div>
<p>The coverage action also generates an HTML report that can later be integrated into the docs.</p>
<div class="admonition info">
<p class="admonition-title">Idea: use ward</p>
<p>I'm also looking at <a href="https://github.com/darrenburns/ward">ward</a>,
but it feels a bit hard to leave pytest and its huge community.</p>
</div>
<h2 id="documentation-mkdocs">Documentation: MkDocs<a class="headerlink" href="#documentation-mkdocs" title="Permanent link">Â¤</a></h2>
<p>To write documentation for your project, I suggest using <a href="https://www.mkdocs.org/">MkDocs</a>.
The well-known alternative is of course <a href="https://www.sphinx-doc.org/en/master/">Sphinx</a>.
Sphinx is battle-tested and more targeted towards Python project documentation,
but I've found MkDocs to be easier to work with.</p>
<p>Combined to the great <a href="https://squidfunk.github.io/mkdocs-material/">Material for MkDocs</a> theme,
it gives you a beautiful and responsive website
for your documentation pages, or even for your blog.
And combined to the <a href="https://mkdocstrings.github.io/">mkdocstrings</a> plugin,
you can auto-generate documentation for your Python API
(modules, functions, classes, methods, attributes, etc.).</p>
<p><img src="../../assets/mkdocs-material.svg" style="max-width: 200px;"/>
<img src="../../assets/mkdocstrings-logo.png" style="max-width: 300px;"/></p>
<details class="info">
<summary>Story time: from Sphinx to MkDocs</summary>
<p>A few years ago (around 2020), I bumped into the Pydantic project (again).
I had already seen it before, mainly interested in its settings configuration ability
that could replace most of the logic in my Django app
<a href="https://github.com/pawamoy/django-appsettings">django-appsettings</a>.
This time, when I landed on its docs pages, I thought: "wow, this looks nice".
Then, a bit later, <a href="https://fastapi.tiangolo.com/">FastAPI</a> exploded in our faces,
and I thought again: "hey, looks familiar, and I love it!".
So I looked around and saw that it used MkDocs and a theme called "Material for MkDocs".</p>
<p>I started migrating my projects to MkDocs and Material for MkDocs from Sphinx,
because it looked nicer than the ReadTheDocs theme, and was far easier to use.
Indeed, for the six previous years I had been using Sphinx for my projects
documentation, and I never quite enjoyed writing docs with it.
This was before the <a href="https://myst-parser.readthedocs.io/en/latest/">MyST parser</a>
or <a href="https://github.com/readthedocs/recommonmark">recommonmark</a> (which I used a bit later),
so I was writing my documentation in <a href="https://www.writethedocs.org/guide/writing/reStructuredText/">reStructuredText</a>.
I constantly had to check the syntax of rST and the Sphinx docs
to achieve basic things. In particular, I wanted to have ToC (Table of Contents)
entries in the sidebar for every documented module, class or function
auto-generated with Sphinx's autodoc extension.
I posted <a href="https://github.com/sphinx-doc/sphinx/issues/6316">a question on StackOverflow</a>
and then found a <a href="https://github.com/sphinx-doc/sphinx/issues/6316">feature request</a> on Sphinx's bugtracker:
the answer was "it's not possible (yet)".</p>
<p>So I thought, hey, why not bring that in MkDocs instead of Sphinx?
At the time, the only viable option for autodoc in MkDocs was
Tom Christie's <a href="https://github.com/tomchristie/mkautodoc">mkautodoc</a>.
Tom expressed his lack of capacity to work on the project,
and I had an itch to scratch, so I decided to create my own MkDocs plugin
for auto-documentation. This is how mkdocstrings was born.
Tom's code has been very helpful at the beginning of the project
(mkdocstrings' <code>:::</code> syntax actually comes from mkautodoc),
so thanks Tom!</p>
<p>Today we have a thriving MkDocs community and ecosystem,
and I think it gave a nice push to the Sphinx community which,
to me, seemed to stagnate a bit.</p>
</details>
<p>With MkDocs, you write your documentation in Markdown files,
inside a <code>docs</code> folder. Then you configure MkDocs in <code>mkdocs.yml</code>,
at the root of your repository:</p>
<div class="highlight"><pre><span></span><code>ð<span class="w"> </span>./
âââ<span class="w"> </span>ð<span class="w"> </span>docs/
â<span class="w">   </span>âââ<span class="w"> </span>ð<span class="w"> </span>index.md
âââ<span class="w"> </span>ð<span class="w"> </span>mkdocs.yml
</code></pre></div>
<div class="highlight"><span class="filename">./mkdocs.yml</span><pre><span></span><code><span class="nt">site_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">My project documentation</span>
<span class="nt">theme</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">material</span>
<span class="nt">plugins</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">search</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mkdocstrings</span>
</code></pre></div>
<p>With mkdocstrings, you can inject documentation of an object
using the <code>::: identifier</code> syntax. For example, if you have a project like this:</p>
<div class="highlight"><pre><span></span><code>ð<span class="w"> </span>./
âââ<span class="w"> </span>ð<span class="w"> </span>project/
<span class="w">    </span>âââ<span class="w"> </span>ð<span class="w"> </span>__init__.py
<span class="w">    </span>âââ<span class="w"> </span>ð<span class="w"> </span>module.py
</code></pre></div>
<p>...and this class in <code>module.py</code>:</p>
<div class="highlight"><span class="filename">./project/module.py</span><pre><span></span><code><span class="sd">&quot;&quot;&quot;This module is not very useful.&quot;&quot;&quot;</span>

<span class="k">class</span> <span class="nc">AlmostEmptyClass</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This class doesn&#39;t allow to do a lot of things.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">something</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize an almost empty instance.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            something: Pass something to the instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thing</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">something</span>
</code></pre></div>
<p>...you can inject documentation for your class like so,
in a Markdown file, for example <code>index.md</code>:</p>
<div class="highlight"><span class="filename">./docs/index.md</span><pre><span></span><code>::: project.module.AlmostEmptyClass
</code></pre></div>
<p>Or you could inject the whole module docs, recursively:</p>
<div class="highlight"><span class="filename">./docs/index.md</span><pre><span></span><code>::: project.module
</code></pre></div>
<p>There's even
<a href="https://mkdocstrings.github.io/recipes/#automatic-code-reference-pages">a recipe to automatically document all your modules</a>.</p>
<p><strong>If you want to learn in details how to build documentation
with MkDocs, Material for MkDocs, and mkdocstrings,
I can't recommend this guide enough, from <em>Real Python</em>:
<a href="https://realpython.com/python-project-documentation-with-mkdocs/">Build Your Python Project Documentation With MkDocs</a>.</strong></p>
<p>Building the docs locally is as easy as running <code>mkdocs build</code>,
and deploying them onto GitHub Pages
is just a matter of running <code>mkdocs gh-deploy</code>.</p>
<p>The <code>copier-pdm</code> template provides these actions/duties to check, build and deploy your docs:</p>
<ul>
<li><code>make docs</code>: build the docs locally, in the <code>site</code> directory</li>
<li><code>make docs-serve</code>: serve the docs locally, at <a href="http://localhost:8000">http://localhost:8000</a></li>
<li><code>make docs-deploy</code>: deploy your docs on GitHub Pages</li>
<li><code>make check-docs</code>: build docs in strict mode, failing at any warning or error</li>
</ul>
<h2 id="continuous-integration-github-actions">Continuous Integration: GitHub Actions<a class="headerlink" href="#continuous-integration-github-actions" title="Permanent link">Â¤</a></h2>
<p>GitHub Actions allows to do continuous integration
on most major operating systems: Linux, MacOS and Windows,
which is very nice when you build a cross-platform tool or library.</p>
<p>To follow the DRY principle, what is executed in CI can be executed locally,
and reciprocally. Locally, we use <code>duty</code> to run the tasks,
so we do the same in CI:</p>
<div class="highlight"><span class="filename">.github/workflows/ci.yml</span><pre><span></span><code><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ci</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">quality</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>

<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Checkout</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v2</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up PDM</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pdm-project/setup-pdm@v2.6</span><span class="w">  </span><span class="c1"># (1)</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3.8&quot;</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Resolving dependencies</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pdm lock</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pdm install -G duty -G docs -G quality -G typing -G security</span><span class="w">  </span><span class="c1"># (2)</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Check if the documentation builds correctly</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pdm run duty check-docs</span><span class="w">  </span><span class="c1"># (3)</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Check the code quality</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pdm run duty check-quality</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Check if the code is correctly typed</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pdm run duty check-types</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Check for vulnerabilities in dependencies</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pdm run duty check-dependencies</span>

<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>

<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">        </span><span class="nt">os</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">macos-latest</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">windows-latest</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;3.7&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;3.8&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;3.9&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;3.10&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;3.11-dev&quot;</span>

<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ matrix.os }}</span>

<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Checkout</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v2</span><span class="w">    </span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up PDM</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pdm-project/setup-pdm@v2.6</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ matrix.python-version }}</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pdm install --no-editable -G duty -G tests</span><span class="w">  </span><span class="c1"># (4)</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run the test suite</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pdm run duty test</span><span class="w">  </span><span class="c1"># (5)</span>
</code></pre></div>
<ol>
<li>The PDM project provides this very convenient
    <a href="https://github.com/pdm-project/setup-pdm"><code>setup-pdm</code> GitHub action</a>.</li>
<li>We install production dependencies and every necessary development dependency.</li>
<li>And we run each check sequentially: docs, quality, types, security. That should be fast enough.</li>
<li>We only install production dependencies and tests development dependencies.
    We tell PDM not to use an editable installation method,
    to be as close as a production environment as possible. </li>
<li>We run the test suite.</li>
</ol>
<p>That's it. No special cases for CI. Whats runs up there
can run down here with <code>make check test</code>.</p>
<h2 id="workflow-integrating-everything-together">Workflow: integrating everything together<a class="headerlink" href="#workflow-integrating-everything-together" title="Permanent link">Â¤</a></h2>
<p>Now let see the typical workflow with all these tools integrated together.</p>
<p>If you don't already have a local clone of your project,
you clone it, enter it and install dependencies:</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>...
<span class="nb">cd</span><span class="w"> </span>...
make<span class="w"> </span>setup
</code></pre></div>
<p>Then you can start working on a bugfix, feature or documentation improvement.</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>switch<span class="w"> </span>-c<span class="w"> </span>fix-some-bug
</code></pre></div>
<p>For example, you add a test to your test suite to assert that it fails
with the current code, and then run the test suite:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># add a failing test, then</span>
make<span class="w"> </span><span class="nb">test</span>
</code></pre></div>
<p>It fails successfully on every Python version.
You can now fix the code itself, and run the test suite again
to make sure it's fixed for every Python version you support:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># fix the code, then</span>
make<span class="w"> </span><span class="nb">test</span>
</code></pre></div>
<p>The test passes on every version, great.
Make sure the code is well-formatted and there's no code smells:</p>
<div class="highlight"><pre><span></span><code>make<span class="w"> </span>format<span class="w"> </span>check
<span class="c1"># fix any code smell</span>
</code></pre></div>
<p>If you wrote or updated documentation, serve the site locally
to check if everything renders correctly:</p>
<div class="highlight"><pre><span></span><code>make<span class="w"> </span>docs-serve
<span class="c1"># go to localhost:8000</span>
</code></pre></div>
<p>You are ready to commit. At some point you will want to release
a new version, and therefore add a new entry in the changelog.
You will be able to auto-generate such an entry thanks to
<a href="https://github.com/pawamoy/git-changelog">git-changelog</a>,
but only if you follow the
<a href="https://gist.github.com/brianclements/841ea7bffdb01346392c">Angular commit-message convention</a>,
prefixing commit messages with a type like <code>feat</code> or <code>fix</code>.</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>commit<span class="w"> </span>-am<span class="w"> </span><span class="s2">&quot;fix: Fix broken feature X&quot;</span>
</code></pre></div>
<p>After some commits (and/or merged pull requests),
and if you are ready to release a new version,
you can update your changelog and see
if the suggestion new version matches your expectations:</p>
<div class="highlight"><pre><span></span><code>make<span class="w"> </span>changelog
<span class="c1"># review CHANGELOG.md</span>
</code></pre></div>
<p>The new version is based on your latest Git tag.</p>
<p>With a major version of <code>0</code>, fixes and code refactoring
will increment the patch version by 1, and features will increment
the minor version by 1. Breaking changes (detected using the body
of the commit message) won't increment the major version.</p>
<p>With a major version higher than 0, detected breaking changes
will increment the major version.</p>
<p>Changes since the last release will be nicely organized
in sections such as "Features" and "Bug fixes".</p>
<p>The changelog should only be updated when you are ready
to publish a new release. Then, simply build and publish
a new release of your project, providing the same version
that was added to the changelog (you don't need to commit it):</p>
<div class="highlight"><pre><span></span><code>make<span class="w"> </span>release<span class="w"> </span><span class="nv">version</span><span class="o">=</span><span class="m">1</span>.2.3
<span class="c1"># check out your new release on pypi.org!</span>
</code></pre></div>
<p>The changelog and release parts are explained a bit more in the
<a href="https://pawamoy.github.io/copier-pdm/work/#changelog">Changelog</a> and
<a href="https://pawamoy.github.io/copier-pdm/work/#releases">Releases</a> sections of the
<a href="https://pawamoy.github.io/copier-pdm/requirements/">template's documentation</a>.</p>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">Â¤</a></h2>
<p>What I like about this template and the projects generated with it,
is that they are pretty much self-contained. You have everything
you need at the tips of your fingers, and don't have to rely
on particular online services to perform specific actions.
Don't like GitHub Actions? Switch to something else!
You'll always be able to run checks and tests locally,
or publish a new release or a documentation update from
your local machine.</p>
<p>I hope you enjoyed the article, or at least learned one or two things.
In any case, don't hesitate to leave a comment: I'll gladly fix any
mistake I made, or elaborate if something isn't clear enough.</p>

  <!-- Giscus -->
  <!-- https://squidfunk.github.io/mkdocs-material/setup/adding-a-comment-system/#giscus-integration -->
  <hr>
  <h2 id="__comments">Comments</h2>
  <script src="https://giscus.app/client.js"
    data-repo="pawamoy/pawamoy.github.io"
    data-repo-id="MDEwOlJlcG9zaXRvcnk1NTYxNzIxNA=="
    data-category="General"
    data-category-id="DIC_kwDOA1Cmvs4CPVxB"
    data-mapping="pathname"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="preferred_color_scheme"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async>
  </script>

  <!-- Reload on palette change -->
  <script>
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object")
      if (palette.color.scheme === "slate") {
        var giscus = document.querySelector("script[src*=giscus]")
        giscus.setAttribute("data-theme", "dark")
      }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate" ? "dark" : "light"

          /* Instruct Giscus to change theme */
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../adding-links-to-formatted-and-syntax-highlighted-code/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Adding links to a Black formatted, Pygments syntax highlighted Python code block">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Adding links to a Black formatted, Pygments syntax highlighted Python code block
              </div>
            </div>
          </a>
        
        
          
          <a href="../testing-fastapi-ormar-alembic-apps/" class="md-footer__link md-footer__link--next" aria-label="Next: Testing a FastAPI application using Ormar models and Alembic migrations">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Testing a FastAPI application using Ormar models and Alembic migrations
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs Insiders
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/pawamoy" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
    
    
    
      
      
    
    <a href="https://fosstodon.org/@pawamoy" target="_blank" rel="noopener me" title="fosstodon.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/pawamoy" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://linkedin.com/in/timothÃ©e-mazzucotelli-0321607b/" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "search.highlight", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.f2da59ea.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.65061dd4.min.js"></script>
      
        <script src="../../assets/_markdown_exec_pyodide.js"></script>
      
    
  </body>
</html>